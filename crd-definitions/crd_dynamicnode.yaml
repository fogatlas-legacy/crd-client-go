apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  name: dynamicnodes.fogatlas.fbk.eu
  annotations:
    "helm.sh/hook": crd-install
    "helm.sh/hook-delete-policy": "before-hook-creation"
spec:
  group: fogatlas.fbk.eu
  version: v1alpha1
  names:
    kind: DynamicNode
    plural: dynamicnodes
  scope: Namespaced
  validation:
   openAPIV3Schema:
     type: object
     properties:
        spec:
          type: object
          properties:
            id:
              type: string
              description: id of the dynamicnode (uuid)
            ip_address:
              type: string
            region_id:
              type: string
            ansible_ssh_user:
              type: string
            location:
              type: string
              example: '46.0706631,11.1134498'
            tier:
              type: integer
              description: 'From 0 to X, where 0 is cloud and X is the leaf tier in the hierarchy'
            architecture:
              type: string
            processor:
              type: string
              description: 'k8s resource definition, see: https://goo.gl/kHrqZ2'
            gpu:
              type: string
              description: 'k8s resource definition, see: https://goo.gl/kHrqZ2'
            memory:
              type: string
              description: 'k8s resource definition, see: https://goo.gl/kHrqZ2'
            storage:
              type: string
              description: 'k8s resource definition, see: https://goo.gl/kHrqZ2'
            operating_system:
              type: string
            status:
              type: string
              enum:
                - baremetal
                - vpnset
                - clustered
                - free_ext
                - free
                - advertised
                - reserved_ext
                - reserved
                - provisioned_ext
                - provisioned
                - provisioning
                - unprovisioning
                - clustering
                - unclustering
